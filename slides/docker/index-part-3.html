<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>reveal.js</title>

    <link rel="stylesheet" href="../../dist/reset.css" />
    <link rel="stylesheet" href="../../dist/reveal.css" />
    <link rel="stylesheet" href="../../dist/theme/black.css" id="theme" />
    <link rel="stylesheet" href="./css/style.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="../../plugin/highlight/monokai.css" id="highlight-theme" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-auto-animate>
          <img src="https://img.icons8.com/office/180/000000/pull-request.png" />
          <h5 class="color-blue">Docker for Development</h5>
        </section>

        <section data-auto-animate>
          <div
            style="position: absolute; top: 0px; right: 0px; bottom: 0px; left: 0px; height: 70vh"
          >
            <img
              style="position: absolute; top: 0px; right: 0px"
              width="60px"
              src="https://img.icons8.com/office/180/000000/pull-request.png"
            />
            <h5 class="color-blue" style="opacity: 0">Docker for Development</h5>
            <div style="padding-top: 150px">
              <ul style="list-style: none">
                <li><p class="color-blue fragment fragment-fade-in">✅ Setup the Dev env</p></li>
                <li><p class="color-blue fragment fragment-fade-in">✅ Setup the Tests env</p></li>
                <li><p class="color-blue fragment fragment-fade-in">✅ Setup the Prod env</p></li>
              </ul>
            </div>
          </div>
        </section>

        <section data-auto-animate>
          <h1 class="blue"><span> 👨🏻‍💻 </span></h1>
          <h1 class="blue">the Dev env</h1>
        </section>

        <section>
          <div style="display: flex; flex-direction: column; justify-content: space-around">
            <div class="block dark-gray" style="margin-bottom: 60px">GITHUB</div>
            <div data-fragment-index="2" style="display: flex; justify-content: space-around">
              <div
                data-fragment-index="3"
                class="fragment fragment-fadein block green"
                style="width: 300px"
              >
                Branch
              </div>
              <div
                data-fragment-index="4"
                class="fragment fragment-fadein block green"
                style="width: 300px"
              >
                Master
              </div>
            </div>

            <div style="display: flex; justify-content: space-around">
              <div
                data-fragment-index="5"
                class="arrow fragment fragment-fadein"
                style="
                  position: relative;
                  border: 0px solid yellow;
                  height: 100px;
                  width: 100px;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  transform: rotate(-45deg);
                "
              >
                <div
                  style="
                    width: 40px;
                    height: 2px;
                    border: 3px dotted rgb(64, 236, 64);
                    position: relative;
                    transform: rotate(90deg);
                  "
                >
                  <div
                    style="
                      width: 20px;
                      height: 2px;
                      border: 3px dotted rgb(64, 236, 64);
                      transform: rotate(50deg);
                      position: absolute;
                      right: -30px;
                      top: -10px;
                    "
                  ></div>
                  <div
                    style="
                      width: 20px;
                      height: 2px;
                      border: 3px dotted rgb(64, 236, 64);
                      transform: rotate(-50deg);
                      position: absolute;
                      right: -30px;
                      bottom: -10px;
                    "
                  ></div>
                </div>
              </div>

              <div
                data-fragment-index="6"
                class="arrow fragment fragment-fadein"
                style="
                  position: relative;
                  border: 0px solid yellow;
                  height: 100px;
                  width: 100px;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  transform: rotate(230deg);
                "
              >
                <div
                  style="
                    width: 40px;
                    height: 2px;
                    border: 3px dotted rgb(64, 236, 64);
                    position: relative;
                    transform: rotate(90deg);
                  "
                >
                  <div
                    style="
                      width: 20px;
                      height: 2px;
                      border: 3px dotted rgb(64, 236, 64);
                      transform: rotate(50deg);
                      position: absolute;
                      right: -30px;
                      top: -10px;
                    "
                  ></div>
                  <div
                    style="
                      width: 20px;
                      height: 2px;
                      border: 3px dotted rgb(64, 236, 64);
                      transform: rotate(-50deg);
                      position: absolute;
                      right: -30px;
                      bottom: -10px;
                    "
                  ></div>
                </div>
              </div>
            </div>
            <div style="display: flex; justify-content: space-around">
              <h1 class="blue"><span> 👨🏻‍💻 </span></h1>
            </div>
          </div>
        </section>

        <section>
          <h3 class="blue">Example</h3>
          <h4 class="blue">Let's create simple ⚛️ React App</h4>
        </section>

        <section>
          <pre class="bash-txt">
           <code> 
demo@demo:$ npx create-react-app react_demo && yarn start
           </code>
            Compiled successfully!
  You can now view react_demo in the browser.

    Local:            http://localhost:3000
    On Your Network:  http://192.168.0.88:3000

  Note that the development build is not optimized.
  To create a production build, use yarn build.
          </pre>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: 18px">
           <code> 
demo@demo:$ cd react_demo && tree
           </code>
           ➞ tree
           .
           ├── README.md
           ├── package.json
           ├── public
           │   ├── favicon.ico
           │   ├── index.html
           │   ├── logo192.png
           │   ├── logo512.png
           │   ├── manifest.json
           │   └── robots.txt
           ├── src
           │   ├── App.css
           │   ├── App.js
           │   ├── App.test.js
           │   ├── index.css
           │   ├── index.js
           │   ├── logo.svg
           │   ├── serviceWorker.js
           │   └── setupTests.js
           └── yarn.lock
           
           2 directories, 17 files
          </pre>
        </section>
        <section>
          <img src="assets/img/react_app.png" />
        </section>

        <section>
          <pre class="bash-txt" style="font-size: 16px">
            <code data-trim data-noescape data-line-numbers="5"> 
            ➞ tree
            .
            ├── README.md
            ├── package.json
            ├── Dockerfile.dev
            ├── public
            │   ├── favicon.ico
            │   ├── index.html
            │   ├── logo192.png
            │   ├── logo512.png
            │   ├── manifest.json
            │   └── robots.txt
            ├── src
            │   ├── App.css
            │   ├── App.js
            │   ├── App.test.js
            │   ├── index.css
            │   ├── index.js
            │   ├── logo.svg
            │   ├── serviceWorker.js
            │   └── setupTests.js
            └── yarn.lock
            
            2 directories, 17 files
            </code>
           </pre>
        </section>

        <section>
          <pre class="bash-txt">
            <code data-noescape data-line-numbers> 
                FROM node:latest
                RUN mkdir -p /usr/src/app
                WORKDIR /usr/src/app
                COPY package.json .
                RUN yarn install
                COPY . .
                CMD ["yarn" ,"start" ]
            </code>
           </pre>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: calc(2+1vw)">
            <code data-noescape>
 d build -t react_app -f dockerfile.dev . && d run -it  -p 3000:3000 react_app
            </code>
           </pre>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: calc(2+1vw)">

      Compiled successfully!

      You can now view react_demo in the browser.
      
        Local:            http://localhost:3000
        On Your Network:  http://172.17.0.2:3000
      
      Note that the development build is not optimized.
      To create a production build, use yarn build.

           </pre
          >
        </section>

        <section>
          <img src="./assets/img/react_app.gif" width="80%" height="650px" />
        </section>

        <section>
          <img src="./assets/img/react_app2.gif" height="400px" width="900px" />
        </section>

        <section>
          <pre class="bash-txt">
            <code data-noescape data-line-numbers="7"> 
      FROM node:latest
      RUN mkdir -p /usr/src/app
      WORKDIR /usr/src/app
      COPY package.json .
      RUN yarn install
      COPY . .
      CMD ["yarn" ,"start" ]
            </code>
           </pre>
        </section>

        <section>
          <p class="fragment fragment-fade-in" data-fragment-index="1">
            <span class="fragment fragment-fade-in" data-fragment-index="2">❌</span>
            rebuild
          </p>
          <p class="fragment fragment-fade-in" data-fragment-index="3">
            <span class="fragment fragment-fade-in" data-fragment-index="4">❌</span> volumes
          </p>
          <p class="fragment fragment-fade-in" data-fragment-index="5">
            <span class="fragment fragment-fade-in" data-fragment-index="6">✅</span> fs mapping
          </p>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: calc(2+1vw)">
            <code data-noescape>
 d run -it  -p 3000:3000 -v $(pwd):/usr/src/app react_app
            </code>
           </pre>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: calc(2+1vw)">
            
        ➞ d run -it  -p 3000:3000 -v $(pwd):/usr/src/app react_app
        yarn run v1.22.5
        $ react-scripts start
        /bin/sh: 1: react-scripts: not found
        error Command failed with exit code 127.
        
           </pre
          >
        </section>

        <section>
          <pre class="bash-txt" style="font-size: 16px">

  ➞ d run -it  -p 3000:3000 -v $(pwd):/usr/src/app -v /usr/src/app/node_modules react_app
          </pre>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: calc(2px+0.5vw)">
            
            Compiled successfully!

            You can now view react_demo in the browser.
            
              Local:            http://localhost:3000
              On Your Network:  http://172.17.0.2:3000
            
            Note that the development build is not optimized.
            To create a production build, use yarn build.
        
           </pre
          >
        </section>

        <section>
          <div
            style="
              height: 90vh;
              width: 100vh;
              display: flex;
              justify-content: center;
              align-items: center;
            "
          >
            <img src="./assets/img/video2.gif" />
          </div>
        </section>

        <section>
          <h2 class="blue">Full Stack</h2>
        </section>

        <section data-auto-animate>
          <h2 class="blue">Full Stack</h2>
          <div data-auto-animate class="row fragment fragment-fade-in" data-fragment-index="1">
            <div class="box">CLIENT</div>
            <div class="box">BACKEND</div>
            <div class="box">DB</div>
          </div>

          <div class="row">
            <div class="box fragment fragment-fade-in" data-fragment-index="2">REST-API</div>
            <div class="box fragment fragment-fade-in" data-fragment-index="3">GQL</div>
            <div class="box fragment fragment-fade-in" data-fragment-index="4">LOG</div>
          </div>

          <div class="row">
            <div class="box fragment fragment-fade-in" data-fragment-index="5">BATCH</div>
            <div class="box fragment fragment-fade-in" data-fragment-index="6">BACKUP</div>
            <div class="box fragment fragment-fade-in" data-fragment-index="7">PROXY</div>
          </div>
        </section>

        <section data-auto-animate>
          <div class="docker-box">
            <p>docker compose</p>
            <div class="row" style="border: 1px">
              <div class="con">CLIENT</div>
              <div class="con">BACKEND</div>
              <div class="con">DB</div>
            </div>

            <div class="row">
              <div class="con">REST-API</div>
              <div class="con">GQL</div>
              <div class="con">LOG</div>
            </div>

            <div class="row">
              <div class="con">BATCH</div>
              <div class="con">BACKUP</div>
              <div class="con">PROXY</div>
            </div>
          </div>
          <!-- <div class=" dock"  style="position:absolute; top:30%">
            <img width="200px" src="./assets/img/docker.png" />
          </div> -->
        </section>

        <section data-auto-animate>
          <img src="./assets/img/arch.png" />
        </section>

        <section data-auto-animate>
          <div style="display: flex; justify-content: start">
            <div style="transform: scale(0.6)"><img src="./assets/img/arch.png" /></div>
            <div style="display: flex; flex-direction: column; justify-content: space-around">
              <div class="con">CLIENT</div>
              <div
                data-fragment-index="2"
                class="arrow fragment fragment-fadein"
                style="
                  position: relative;
                  border: 0px solid yellow;
                  height: 100px;
                  width: 100px;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                "
              >
                <div
                  style="
                    width: 40px;
                    height: 2px;
                    border: 3px dotted rgb(64, 236, 64);
                    position: relative;
                    transform: rotate(90deg);
                  "
                >
                  <div
                    style="
                      width: 20px;
                      height: 2px;
                      border: 3px dotted rgb(64, 236, 64);
                      transform: rotate(50deg);
                      position: absolute;
                      right: -30px;
                      top: -10px;
                    "
                  ></div>
                  <div
                    style="
                      width: 20px;
                      height: 2px;
                      border: 3px dotted rgb(64, 236, 64);
                      transform: rotate(-50deg);
                      position: absolute;
                      right: -30px;
                      bottom: -10px;
                    "
                  ></div>
                </div>
              </div>
              <div class="con">
                BACKEND

                <div
                  data-fragment-index="2"
                  class="arrow fragment fragment-fadein"
                  style="
                    top: -100px;
                    left: -100px;
                    position: relative;
                    border: 0px solid yellow;
                    height: 100px;
                    width: 100px;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                  "
                >
                  <div
                    style="
                      width: 40px;
                      height: 2px;
                      border: 3px dotted rgb(64, 236, 64);
                      position: relative;
                      transform: rotate(180deg);
                    "
                  >
                    <div
                      style="
                        width: 20px;
                        height: 2px;
                        border: 3px dotted rgb(64, 236, 64);
                        transform: rotate(50deg);
                        position: absolute;
                        right: -30px;
                        top: -10px;
                      "
                    ></div>
                    <div
                      style="
                        width: 20px;
                        height: 2px;
                        border: 3px dotted rgb(64, 236, 64);
                        transform: rotate(-50deg);
                        position: absolute;
                        right: -30px;
                        bottom: -10px;
                      "
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3>Folder structure</h3>
          <pre class="bash-txt">
            <code data-trim data-noescape data-line-numbers="9-12">
 ➞ tree -d .
.
├── mongo
│   └── ...
├── nmap
│   └── ...
├── praser
│   └── ...
├── reactApp (client)
│   └── ...
├── backend 
    └── ...
  </code>
            </pre>
        </section>
        <section>
          <h4 class="blue">⚛️ React App</h4>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: 16px">

  ➞ d run -it  -p 3000:3000 -v $(pwd):/usr/src/app -v /usr/src/app/node_modules react_app

    <code data-noescape > 
    FROM node:latest
    RUN mkdir -p /usr/src/app
    WORKDIR /usr/src/app
    COPY package.json .
    RUN yarn install
    COPY . .
    CMD ["yarn" ,"start" ]
    </code>
          </pre>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: 13px">
    <code  > 
      version: '3'
      volumes:
        mongoVolume:
        sharedFolder:
      
      services:
        mongo-server:
          image: 'mongo'
          restart: always
          volumes:
            - mongoVolume:/data/db
          ports:
            - 27017:27017
        nmap:
          build: nmap/.
          restart: always
          volumes:
            - sharedFolder:/usr/src/app/data
        parser:
          build: parser/.
          restart: always
          volumes:
            - sharedFolder:/usr/src/app/data
          environment:
            - MONGO_HOST=mongo-server
    </code>
          </pre>
        </section>

        <section>
          <pre class="bash-txt" style="font-size: 16px">
    <code data-trim data-noescape data-line-numbers="10-19"> 
      version: '3'
      volumes:
        mongoVolume:
        sharedFolder:
      
      services:
        mongo-server:
        nmap:
        parser:
        client:
          stdin_open: true
          build:
            context: reactApp
            dockerfile: dockerfile.dev
          volumes:
            - ./reactApp:/usr/src/app
            - /usr/src/app/node_modules
          ports:
            - 3000:3000
    </code>
          </pre>
        </section>
        <section>
          <img src="./assets/img/react-run.gif" />
        </section>

        <section>
          <h4 class="blue">💢 Backend</h4>
        </section>

        <section>
          <pre class="bash-txt">

  ➞ tree -d
  backend:
  ├── api.js
  ├── package.json
  ├── yarn.lock
    
          </pre>
        </section>

        <section>
          api.js
          <pre style="font-size: 16px"><code data-line-numbers="">
  try {
    (async function () {
      console.log(url)
      mongo.db = await mongoConnect(url)
      mongo.dbo = mongo.db.db('mydb')
    })()
  } catch (a) {
    console.log(e)
  }
            </code></pre>
        </section>

        <section>
          api.js
          <pre style="font-size: 16px"><code data-line-numbers="">
  const mongoGet = async () => {
    return new Promise(function (yes, no) {
      try {
        mongo.dbo.collection('scans').findOne({}, function (err, res) {
          if (err) throw err
          yes(res)
        })
      } catch (err) {
        console.log('ERROR mongo SET', err)
        no(err)
      }
    })
  }
            </code></pre>
        </section>

        <section>
          api.js
          <pre style="font-size: 16px"><code data-line-numbers="">
    app.get('/', function (req, res) {
      res.send('Working !!!')
    })
    
    app.get('/api/get', async function (req, res) {
      const data = await mongoGet()
      res.json(data)
    })
    
    app.listen(port, function () {
      console.log('listening on port ' + port)
    })

            </code></pre>
        </section>

        <section>
          dockerfile
          <pre style="font-size: 16px"><code data-line-numbers="">
            FROM node:latest
            RUN mkdir -p /usr/src/app
            WORKDIR /usr/src/app
            COPY package.json .
            RUN yarn install
            COPY api.js .
            CMD ["node" ,"api.js" ]
    
            </code></pre>
        </section>

        <section>
          docker-compose
          <pre style="font-size: 16px"><code data-line-numbers="12-19">
version: '3'
volumes:
  mongoVolume:
  sharedFolder:

services:
  mongo-server:
  nmap:
  parser:
  client:
  backend:
    build: backend/.
    restart: always
    ports:
      - 8080:8080
    environment:
      - MONGO_HOST=mongo-server
    
            </code></pre>
        </section>

        <section>
          docker-compose
          <pre style="font-size: 16px"><code data-line-numbers="12-19">
version: '3'
volumes:
  mongoVolume:
  sharedFolder:

services:
  mongo-server:
  nmap:
  parser:
  client:
  backend:
    build: backend/.
    restart: always
    ports:
      - 8080:8080
    environment:
      - MONGO_HOST=mongo-server
    
            </code></pre>
        </section>
        <section>
          <img src="./assets/img/backend.gif" />
        </section>

        <section>
          <p>Full Stack Docker Dev Env</p>
          <div class="">
            <div class="row" style="border: 1px">
              <div class="con">NMAP</div>
              <div class="con">CLIENT</div>
            </div>
            <div class="row">
              <div class="finger fragment fragment-fade-in" data-fragment-index="1" style="transform: rotate(90deg)">👉</div>
              <div class="docker finger fragment fragment-fade-in" data-fragment-index="5"> <img width="150px"src="./assets/img/docker.png"> </div>
              <div class="finger fragment fragment-fade-in" data-fragment-index="3" style="transform: rotate(90deg)">👉</div>
            </div>
            <div class="row">
              <div class="con">PARSER</div>
              <div class="finger fragment fragment-fade-in" data-fragment-index="2" >👉</div>
              <div class="con">DB</div>
              <div class="finger fragment fragment-fade-in" data-fragment-index="4" style="transform: rotate(180deg)">👉</div>
              <div class="con">BACKEND</div>
            </div>
          </div>
        </section>

        <section>Back to the ⚛️ Client</section>
      </div>
    </div>

    <script src="../../dist/reveal.js"></script>
    <script src="../../plugin/notes/notes.js"></script>
    <script src="../../plugin/markdown/markdown.js"></script>
    <script src="../../plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      })
    </script>
  </body>
</html>
